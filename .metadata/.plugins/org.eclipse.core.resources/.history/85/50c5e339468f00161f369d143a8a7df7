package decryption;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;

public class Main {

	private static String file = ".\\message.txt";
	private static String msg = "";
	private static BufferedReader in;
	
	
	
	/**
	 * @param args
	 */
	public static void main(String[] args) {
		try {
			readfile();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		ArrayList<Occurence> occurences = Outils.searchOccur(msg);
		//ArrayList<Occurence> occurences = Outils.searchOccur("ADQYSMIUSBOXKKTMIBHKIZOOOEQOOGIFBAGKAUMFVVTAACIDTWMOCIOEQOOGBMBFVZGGWPCIEKQHSNEWVECNEDLAAVRWKXSVNSVPHCEUTQOIOFMEGJSWTPCHAJMOCHIUIX");
		msg = msg.toLowerCase();
		System.out.println("Liste des occurences : ");
		for(Occurence occurence : occurences){
			System.out.println("[" + occurence + "] ; ");
		}
		int tailleCle = Outils.PGCDDistance(occurences);
		System.out.println("\nLa taille probable de la clé est : " + tailleCle);
		
		String[] msgSliced = Outils.textSlicer(msg, tailleCle);
		
		System.out.println("\nFréquence d'apparition de chaque caractère dans chaque ligne :\n");
		Outils.countNbLetters(msgSliced);
		
		System.out.println("\nFréquence de base dans l'alphabet (francais) \n");
		String[] frequenceAlphabetFrancais = Outils.showFrequenceAlphabet();
		System.out.println(frequenceAlphabetFrancais.toString());
		
	}

	private static void readfile() throws IOException
	{		
			in = new BufferedReader(new FileReader(file)) ;
			String line;
			while ((line = in.readLine()) != null)
			{
				msg = msg +line;
			}
	}
	
}
